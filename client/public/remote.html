<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Remote Control</title>
    <script src="/socket.io/socket.io.js"></script>
    <style>
        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <button id="toggleCamera">Toggle open camera</button>
    
    <div id="styleButtons" class="hidden">
        <!-- Style buttons will be added here dynamically -->
    </div>

    <button id="handleGoBack" class="hidden">Go back</button>
    <button id="handleCapturePhoto" class="hidden">Capture photo</button>

    <script>
        const socket = io("http://192.168.2.142:3000"); // Replace with your server address

        const styles = [
            {
                id: 1,
                name: "Post-Impressionism",
                img: "https://magazine.artland.com/wp-content/uploads/2022/07/van-gogh-starry-night-min.jpg",
                description: "A Post-Impressionism is an art movement that emerged in the late 19th century as a reaction to Impressionism.",
                style_prompt: "Post-Impressionist painting with vivid, expressive colors and bold, visible brushstrokes."
            },
            {
                id: 2,
                name: "Renaissance",
                img: "https://cdn.britannica.com/41/3341-050-825E2B57/The-Creation-of-Adam-ceiling-fresco-Sistine.jpg",
                description: "Characterized by a focus on realism, proportion, and humanism.",
                style_prompt: "A highly detailed and realistic painting of a serene scene from the Renaissance period."
            },
            {
                id: 3,
                name: "Cubism",
                img: "https://theartiz.ai/wp-content/uploads/2024/06/ec4-scaled.jpg",
                description: "An avant-garde movement that fragments objects into geometric shapes.",
                style_prompt: "A fragmented, geometric representation of a subject in the style of Cubism."
            },
            {
                id: 4,
                name: "Surrealism",
                img: "https://media.cnn.com/api/v1/images/stellar/prod/rene-magritte-le-double.jpg?c=original",
                description: "A movement that merges the dream world with reality.",
                style_prompt: "A dreamlike, surreal scene that defies logic and blends reality with fantasy."
            },
            {
                id: 5,
                name: "Baroque",
                img: "https://cdn.thecollector.com/wp-content/uploads/2023/12/important-baroque-paintings.jpg",
                description: "Known for its dramatic lighting and intense emotions.",
                style_prompt: "A dramatic and ornate Baroque-style painting with dynamic movement."
            },
            {
                id: 6,
                name: "Abstract",
                img: "https://www.meisterdrucke.ie/kunstwerke/1260px/fachtali_abderrahim_-_Abstract_painting_silhouette_of_dancing_woman_Printable_digital_Art_-_%28MeisterDrucke-1469538%29.jpg",
                description: "Abstract art breaks away from traditional representation.",
                style_prompt: "A vibrant and non-representational abstract painting, with bold shapes and dynamic lines."
            },
        ];

        let isCameraOpen = false; // Track camera state

        socket.on("connect", () => {
            console.log("Connected to server");
        });

        socket.on("disconnect", () => {
            console.log("Disconnected from server");
        });

        document.getElementById("toggleCamera").addEventListener("click", () => {
            isCameraOpen = !isCameraOpen; // Toggle camera state
            console.log("Emitting toggle-camera event");
            socket.emit("toggle-camera", isCameraOpen); // Emit toggle camera

            // Show/hide style buttons based on camera state
            const styleButtonsContainer = document.getElementById("styleButtons");
            if (isCameraOpen) {
                styleButtonsContainer.classList.remove("hidden");
                // Clear existing buttons
                styleButtonsContainer.innerHTML = '';
                // Create buttons for each style
                styles.forEach(style => {
                    const button = document.createElement("button");
                    button.id = `${style.name.toLowerCase().replace(/ /g, '')}Button`;
                    button.innerText = `Select ${style.name} Style`;
                    button.addEventListener("click", () => {
                        console.log(`Emitting ${style.name} style event`);
                        socket.emit("style-selected", style); // Emit style selection

                        // Hide style buttons and show Go Back button
                        styleButtonsContainer.classList.add("hidden");
                        document.getElementById("handleGoBack").classList.remove("hidden");
                        document.getElementById("handleCapturePhoto").classList.remove("hidden");
                    });
                    styleButtonsContainer.appendChild(button);
                });
            } else {
                styleButtonsContainer.classList.add("hidden");
                document.getElementById("handleGoBack").classList.add("hidden");
                document.getElementById("handleCapturePhoto").classList.add("hidden");
            }
        });

        document.getElementById("handleGoBack").addEventListener("click", () => {
            console.log("Emitting go-back event");
            socket.emit("handle-go-back"); // Emit go back

            // Show style buttons again
            document.getElementById("handleGoBack").classList.add("hidden");
            document.getElementById("styleButtons").classList.remove("hidden");
            document.getElementById("handleCapturePhoto").classList.add("hidden");
        });

        document.getElementById("handleCapturePhoto").addEventListener("click", () => {
            console.log("Emitting capture-photo event");
            socket.emit("handle-capture-photo"); // Emit capture photo

        });
    </script>
</body>
</html>
